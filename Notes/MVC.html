<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../style.css" />
    <title>ASP.NET Core MVC Notes</title>
  </head>
  <body>
    <h1>4. ASP.NET CORE MVC</h1>

    <!-- ===================== SECTION 1 ===================== -->
    <h2 class="section-header" onclick="toggleSection(this)">
      SECTION 1: MVC Pattern &amp; Architecture
      <span class="toggle-icon">â–¼</span>
    </h2>
    <div class="section-content">
      <ul>
        <li>
          <strong>MVC Pattern:</strong> Model (data), View (UI), Controller
          (logic), separation of concerns
        </li>
        <li>
          <strong>Request Flow:</strong> Browser â†’ Routing â†’ Controller â†’ Model
          Binding â†’ Action â†’ View/Result â†’ Response
        </li>
        <li>
          <strong>MVC vs API:</strong> MVC returns Views (HTML), API returns
          data (JSON), same runtime
        </li>
        <li>
          <strong>Project Structure:</strong> Controllers/, Views/, Models/,
          wwwroot/, Program.cs, appsettings.json
        </li>
        <li>
          <strong>Program.cs:</strong> App entry point; configures services,
          middleware, and routes â€” <code>builder.Services()</code> â†’
          <code>builder.Build()</code> â†’ <code>app.Use()</code> â†’
          <code>app.Run()</code>
        </li>
        <li>
          <strong>Middleware Order:</strong> Exception â†’ HTTPS â†’ Static Files â†’
          Routing â†’ Auth â†’ Authorization â†’ Controller Endpoints
        </li>
        <li>
          <strong>Areas:</strong> Split large MVC app into smaller modules; use
          <code>[Area("Admin")]</code>; URL:
          <code>Area/Controller/Action</code>; <strong>Mini MVC</strong>
        </li>
        <li>
          <strong>.NET Core:</strong> <strong>Kestrel</strong> is the built-in
          server hosting the app; <strong>reverse proxy</strong> (IIS/Nginx)
          sits in front to handle SSL, load balancing, static files, cache,
          compression, and forwards requests to Kestrel
        </li>
      </ul>
      <div class="image-icons">
        <span class="image-icons-label">Images:</span>
        <button class="image-icon" onclick="toggleImage(this)" data-src="">
          ðŸ“·
        </button>
        <button class="image-icon" onclick="toggleImage(this)" data-src="">
          ðŸ“·
        </button>
      </div>
      <div class="image-preview-box"></div>
    </div>

    <!-- ===================== SECTION 2 ===================== -->
    <h2 class="section-header" onclick="toggleSection(this)">
      SECTION 2: Controllers &amp; Attributes <span class="toggle-icon">â–¼</span>
    </h2>
    <div class="section-content">
      <ul>
        <li>
          <strong>Controller:</strong> Inherits Controller base class; handles
          HTTP requests; returns IActionResult
        </li>
        <li>
          <strong>Keep Actions Thin:</strong> Delegate logic to
          services/repositories; controllers coordinate only
        </li>
        <li>
          <strong>MVC Action Returns:</strong> <code>IActionResult</code>,
          <code>ActionResult&lt;T&gt;</code>, <code>ViewResult</code>,
          <code>JsonResult</code>, <code>FileResult</code>,
          <code>RedirectToActionResult</code>
        </li>
        <li>
          <strong>Attributes:</strong> <code>[HttpGet]</code>,
          <code>[HttpPost]</code>, <code>[Route(...)]</code>,
          <code>[ValidateAntiForgeryToken]</code>, <code>[Authorize]</code>
        </li>
        <li>
          <strong>Model Binding Sources:</strong> <code>[FromQuery]</code>,
          <code>[FromBody]</code>, <code>[FromRoute]</code>,
          <code>[FromForm]</code>, <code>[FromHeader]</code>
        </li>
        <li>
          <strong>Over-posting Protection:</strong> Use ViewModels or
          <code>[Bind("AllowedProp1,AllowedProp2")]</code>; never model bind
          unnecessary fields
        </li>
      </ul>
      <div class="image-icons">
        <span class="image-icons-label">Images:</span>
        <button class="image-icon" onclick="toggleImage(this)" data-src="">
          ðŸ“·
        </button>
        <button class="image-icon" onclick="toggleImage(this)" data-src="">
          ðŸ“·
        </button>
      </div>
      <div class="image-preview-box"></div>
    </div>

    <!-- ===================== SECTION 3 ===================== -->
    <h2 class="section-header" onclick="toggleSection(this)">
      SECTION 3: Routing <span class="toggle-icon">â–¼</span>
    </h2>
    <div class="section-content">
      <ul>
        <li>
          <strong>Route Types:</strong> Conventional
          <code>{controller=Home}/{action=Index}/{id}</code> and Attribute
          <code>[Route("home/details/{id:int?}")]</code>
        </li>
        <li>
          <strong>Route Constraints:</strong> <code>/products/{id:int}</code> â€”
          <code>:int</code>, <code>:alpha</code>, <code>:datetime</code>,
          <code>:min(value)</code>, <code>:max(value)</code>
        </li>
        <li>
          <strong>Default Route:</strong> <code>Home/Index</code>; fallback for
          root URL; defined via conventional routing in <code>Program.cs</code>
        </li>
        <li>
          <strong>Route Priority:</strong> Attribute routing overrides
          conventional; specific routes first, then generic;
          <code>MapControllers()</code> registers MVC controller endpoints
        </li>
      </ul>
      <div class="image-icons">
        <span class="image-icons-label">Images:</span>
        <button class="image-icon" onclick="toggleImage(this)" data-src="">
          ðŸ“·
        </button>
        <button class="image-icon" onclick="toggleImage(this)" data-src="">
          ðŸ“·
        </button>
      </div>
      <div class="image-preview-box"></div>
    </div>

    <!-- ===================== SECTION 4 ===================== -->
    <h2 class="section-header" onclick="toggleSection(this)">
      SECTION 4: Views &amp; Razor Syntax <span class="toggle-icon">â–¼</span>
    </h2>
    <div class="section-content">
      <ul>
        <li>
          <strong>Razor Basics:</strong> <code>@model</code> directive,
          <code>@Model.Property</code>, <code>@{ code blocks }</code>,
          <code>@if/@for/@foreach</code>
        </li>
        <li>
          <strong>View Discovery:</strong>
          <code>Views/{Controller}/{Action}.cshtml</code> or shared
          <code>Views/Shared/</code>
        </li>
        <li>
          <strong>Layouts:</strong> <code>_Layout.cshtml</code> is master page;
          <code>@RenderBody()</code> renders view content;
          <code>_ViewStart.cshtml</code> sets layout for all views;
          <code>_ViewImports.cshtml</code> holds shared Razor imports for all
          views
        </li>
        <li>
          <strong>Partials:</strong> Reusable HTML fragments â€”
          <code>@Html.Partial("_Header", model)</code>
        </li>
        <li>
          <strong>View Components:</strong> Reusable UI with backend logic;
          inherit <code>ViewComponent</code> &amp; implement
          <code>InvokeAsync()</code>; used for complex widgets (menus,
          notifications) â€”
          <code>@await Component.InvokeAsync("UserInfo", model)</code>
        </li>
        <li>
          <strong>Tag &amp; HTML Helpers:</strong> Tag helpers:
          <code>asp-controller</code>, <code>asp-action</code>,
          <code>asp-for</code>, <code>asp-validation-for</code>; HTML helpers:
          <code>@Html.TextBoxFor()</code>, <code>LabelFor()</code>,
          <code>DropDownListFor()</code>, <code>ActionLink()</code>
        </li>
        <li>
          <strong>Sections:</strong> Allow views to inject page-specific content
          (scripts, styles) into layout via <code>@section</code> in view and
          <code>@RenderSection("Scripts", required: false)</code> in layout
        </li>
      </ul>
      <div class="image-icons">
        <span class="image-icons-label">Images:</span>
        <button class="image-icon" onclick="toggleImage(this)" data-src="">
          ðŸ“·
        </button>
        <button class="image-icon" onclick="toggleImage(this)" data-src="">
          ðŸ“·
        </button>
      </div>
      <div class="image-preview-box"></div>
    </div>

    <!-- ===================== SECTION 5 ===================== -->
    <h2 class="section-header" onclick="toggleSection(this)">
      SECTION 5: Models &amp; ViewModels <span class="toggle-icon">â–¼</span>
    </h2>
    <div class="section-content">
      <ul>
        <li>
          <strong>Domain Models:</strong> Represent database entities and
          business logic
        </li>
        <li>
          <strong>ViewModels:</strong> Tailored for views; prevent over-posting;
          combine multiple models
        </li>
        <li>
          <strong>Model Binding:</strong> Form/query/route data â†’ action
          parameters; automatic population
        </li>
        <li>
          <strong>ModelState:</strong> Validation errors container;
          <code>ModelState.IsValid</code> check;
          <code>ModelState.AddModelError()</code> for custom errors
        </li>
        <li>
          <strong>Return Strategy:</strong> If invalid, return same view with
          model to show errors
        </li>
      </ul>
      <div class="image-icons">
        <span class="image-icons-label">Images:</span>
        <button class="image-icon" onclick="toggleImage(this)" data-src="">
          ðŸ“·
        </button>
        <button class="image-icon" onclick="toggleImage(this)" data-src="">
          ðŸ“·
        </button>
      </div>
      <div class="image-preview-box"></div>
    </div>

    <!-- ===================== SECTION 6 ===================== -->
    <h2 class="section-header" onclick="toggleSection(this)">
      SECTION 6: Validation <span class="toggle-icon">â–¼</span>
    </h2>
    <div class="section-content">
      <ul>
        <li>
          <strong>Client-Side:</strong> Unobtrusive validation with jQuery
          Validate; fast feedback without round trip
        </li>
        <li>
          <strong>Display Errors:</strong> <code>asp-validation-for</code>,
          <code>asp-validation-summary</code>
        </li>
        <li>
          <strong>Server-Side:</strong> Always validate â€” client can be
          bypassed; use Data Annotations, FluentValidation, or Custom
        </li>
        <li>
          <strong>Data Annotations:</strong> <code>[Required]</code>,
          <code>[StringLength]</code>, <code>[Range]</code>,
          <code>[EmailAddress]</code>, <code>[Compare]</code>,
          <code>[RegularExpression]</code>
        </li>
        <li>
          <strong>Custom Validation:</strong> Implement
          <code>ValidationAttribute</code> or <code>IValidatableObject</code>
        </li>
        <li>
          <strong>FluentValidation:</strong> External library; validation rules
          in separate class; more powerful for complex rules
        </li>
      </ul>
      <div class="image-icons">
        <span class="image-icons-label">Images:</span>
        <button class="image-icon" onclick="toggleImage(this)" data-src="">
          ðŸ“·
        </button>
        <button class="image-icon" onclick="toggleImage(this)" data-src="">
          ðŸ“·
        </button>
      </div>
      <div class="image-preview-box"></div>
    </div>

    <!-- ===================== SECTION 7 ===================== -->
    <h2 class="section-header" onclick="toggleSection(this)">
      SECTION 7: Forms <span class="toggle-icon">â–¼</span>
    </h2>
    <div class="section-content">
      <ul>
        <li>
          <strong>Form Submission:</strong> GET (display form) â†’ POST (submit) â†’
          Validate â†’ Persist â†’ Redirect
        </li>
        <li>
          <strong>PRG Pattern:</strong> Post-Redirect-Get prevents duplicate
          submissions on browser refresh
        </li>
        <li>
          <strong>Anti-CSRF:</strong> Form tag helper auto-includes token;
          <code>[ValidateAntiForgeryToken]</code> on POST actions
        </li>
        <li>
          <strong>Form Tag Helpers:</strong> <code>asp-controller</code>,
          <code>asp-action</code>, <code>asp-route-*</code>,
          <code>method="post"</code>
        </li>
        <li>
          <strong>File Upload:</strong> Use <code>IFormFile</code>; validate
          size and type; save to storage
        </li>
      </ul>
      <div class="image-icons">
        <span class="image-icons-label">Images:</span>
        <button class="image-icon" onclick="toggleImage(this)" data-src="">
          ðŸ“·
        </button>
        <button class="image-icon" onclick="toggleImage(this)" data-src="">
          ðŸ“·
        </button>
      </div>
      <div class="image-preview-box"></div>
    </div>

    <!-- ===================== SECTION 8 ===================== -->
    <h2 class="section-header" onclick="toggleSection(this)">
      SECTION 8: AJAX <span class="toggle-icon">â–¼</span>
    </h2>
    <div class="section-content">
      <ul>
        <li>
          <strong>AJAX Pattern:</strong> <code>fetch()</code> or
          <code>$.ajax()</code> â€” call server in background and update part of a
          page without full page reload
        </li>
        <li>
          <strong>Partial View:</strong> Return <code>PartialView()</code> from
          action; renders HTML fragment
        </li>
        <li>
          <strong>JSON Return:</strong> Return <code>Json(data)</code> for
          API-like responses
        </li>
        <li>
          <strong>jQuery Load:</strong>
          <code>$("#div").load("/Home/Partial")</code> for quick partial updates
        </li>
        <li>
          <strong>Progressive Enhancement:</strong> Page should work without JS;
          enhance with AJAX
        </li>
      </ul>
      <div class="image-icons">
        <span class="image-icons-label">Images:</span>
        <button class="image-icon" onclick="toggleImage(this)" data-src="">
          ðŸ“·
        </button>
        <button class="image-icon" onclick="toggleImage(this)" data-src="">
          ðŸ“·
        </button>
      </div>
      <div class="image-preview-box"></div>
    </div>

    <!-- ===================== SECTION 9 ===================== -->
    <h2 class="section-header" onclick="toggleSection(this)">
      SECTION 9: Dependency Injection &amp; Configuration
      <span class="toggle-icon">â–¼</span>
    </h2>
    <div class="section-content">
      <ul>
        <li><strong>Constructor Injection:</strong> Preferred; cleaner</li>
        <li>
          <strong>View Injection:</strong>
          <code>@inject IService service</code> for view-specific needs
        </li>
        <li>
          <strong>Configuration:</strong> <code>IConfiguration</code> reads
          settings from <code>appsettings.json</code> and environment-specific
          files
        </li>
        <li>
          <strong>Options Pattern:</strong> <code>IOptions&lt;T&gt;</code> binds
          settings to strongly-typed classes; configured in
          <code>Program.cs</code>
        </li>
      </ul>

      <table>
        <thead>
          <tr>
            <th>Lifetime</th>
            <th>Scope</th>
            <th>Typical Use Cases</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>Singleton</strong></td>
            <td>One instance for app lifetime</td>
            <td>Configuration, caching, stateless helpers, loggers</td>
          </tr>
          <tr>
            <td><strong>Scoped</strong></td>
            <td>One per HTTP request</td>
            <td>
              DbContext, business services, repositories â€”
              <strong>stateful, data, user</strong>
            </td>
          </tr>
          <tr>
            <td><strong>Transient</strong></td>
            <td>New instance each use</td>
            <td>
              Lightweight, short-lived utility services â€”
              <strong>stateless helpers</strong>
            </td>
          </tr>
        </tbody>
      </table>

      <div class="image-icons">
        <span class="image-icons-label">Images:</span>
        <button class="image-icon" onclick="toggleImage(this)" data-src="">
          ðŸ“·
        </button>
        <button class="image-icon" onclick="toggleImage(this)" data-src="">
          ðŸ“·
        </button>
      </div>
      <div class="image-preview-box"></div>
    </div>

    <!-- ===================== SECTION 10 ===================== -->
    <h2 class="section-header" onclick="toggleSection(this)">
      SECTION 10: Authentication &amp; Authorization
      <span class="toggle-icon">â–¼</span>
    </h2>
    <div class="section-content">
      <ul>
        <li>
          <strong>Middleware Order:</strong>
          <code>app.UseAuthentication()</code> â†’
          <code>app.UseAuthorization()</code> â€” order matters
        </li>
        <li>
          <strong>Cookie Auth:</strong>
          <code>AddAuthentication().AddCookie()</code>,
          <code>SignInAsync/SignOutAsync</code>
        </li>
        <li>
          <strong>Identity:</strong> UserManager, SignInManager, RoleManager â€”
          complete user management system
        </li>
        <li>
          <strong>[AllowAnonymous]:</strong> Bypass auth for login/public pages
        </li>
        <li>
          <strong>User Object:</strong> <code>User.Identity.Name</code>,
          <code>User.IsInRole()</code>, <code>User.Claims</code>
        </li>
        <li>
          <strong>Authentication types:</strong> Cookie, MFA, External;
          <strong>Authorization types:</strong> Role, Claim, Policy
        </li>
      </ul>

      <table>
        <thead>
          <tr>
            <th>Authorization Type</th>
            <th>Example</th>
            <th>Use For</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>Role-based</strong></td>
            <td><code>[Authorize(Roles="Admin")]</code></td>
            <td>Simple scenarios</td>
          </tr>
          <tr>
            <td><strong>Claims-based</strong></td>
            <td><code>User.Claims</code> checks</td>
            <td>Fine-grained access</td>
          </tr>
          <tr>
            <td><strong>Policy-based</strong></td>
            <td><code>[Authorize(Policy="AdminOnly")]</code></td>
            <td>Complex rules</td>
          </tr>
        </tbody>
      </table>

      <div class="image-icons">
        <span class="image-icons-label">Images:</span>
        <button class="image-icon" onclick="toggleImage(this)" data-src="">
          ðŸ“·
        </button>
        <button class="image-icon" onclick="toggleImage(this)" data-src="">
          ðŸ“·
        </button>
      </div>
      <div class="image-preview-box"></div>
    </div>

    <!-- ===================== SECTION 11 ===================== -->
    <h2 class="section-header" onclick="toggleSection(this)">
      SECTION 11: Filters &amp; Middleware <span class="toggle-icon">â–¼</span>
    </h2>
    <div class="section-content">
      <ul>
        <li>
          <strong>Filters:</strong> Run before/after controller/action
          execution; <strong>controller-level</strong>; used for logging,
          validation, authorization, result manipulation
        </li>
        <li>
          <strong>Middleware:</strong> Processes every HTTP request &amp;
          response in the pipeline; <strong>app-wide</strong>; used for CORS,
          auth, static files, routing
        </li>
        <li>
          <strong>Middleware Behavior:</strong> <code>Use()</code> â†’ call next
          middleware; <code>Run()</code> â†’ end pipeline; <code>When()</code> â†’
          run on condition
        </li>
      </ul>

      <table>
        <thead>
          <tr>
            <th>Filter Type</th>
            <th>Runs When</th>
            <th>What it Does</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>Authorization</strong> (<code>[Authorize]</code>)</td>
            <td>Runs first, before any other filters and before action</td>
            <td>
              Decides <strong>who is allowed</strong> to access the action
            </td>
          </tr>
          <tr>
            <td><strong>Resource</strong> (<code>IResourceFilter</code>)</td>
            <td>After authorization, before model binding and after action</td>
            <td>
              Decides <strong>whether request should continue</strong> (cache /
              short-circuit)
            </td>
          </tr>
          <tr>
            <td><strong>Action</strong> (<code>IActionFilter</code>)</td>
            <td>After model binding, just before and after action method</td>
            <td>
              Logic <strong>around the action</strong> (logging, validation,
              parameter changes)
            </td>
          </tr>
          <tr>
            <td><strong>Result</strong> (<code>IResultFilter</code>)</td>
            <td>Around the action result (View/JSON)</td>
            <td>Modifies or logs the <strong>final response</strong></td>
          </tr>
          <tr>
            <td><strong>Exception</strong> (<code>IExceptionFilter</code>)</td>
            <td>Only if an exception occurs in action or result</td>
            <td>Catches MVC errors and returns proper response</td>
          </tr>
        </tbody>
      </table>

      <div class="note">
        <p><strong>Important Middleware (Order Matters):</strong></p>
        <table>
          <thead>
            <tr>
              <th>Middleware</th>
              <th>Purpose</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>
                <code>app.UseExceptionHandler("/Error")</code> /
                <code>app.UseDeveloperExceptionPage()</code>
              </td>
              <td>Global error handling</td>
            </tr>
            <tr>
              <td><code>app.UseHttpsRedirection()</code></td>
              <td>Enforce HTTPS</td>
            </tr>
            <tr>
              <td><code>app.UseStaticFiles()</code></td>
              <td>Serve CSS, JS, images</td>
            </tr>
            <tr>
              <td><code>app.UseRouting()</code></td>
              <td>Enable endpoint routing</td>
            </tr>
            <tr>
              <td><code>app.UseCors("Policy")</code></td>
              <td>Cross-origin requests</td>
            </tr>
            <tr>
              <td><code>app.UseAuthentication()</code></td>
              <td>Identify the user</td>
            </tr>
            <tr>
              <td><code>app.UseAuthorization()</code></td>
              <td>Enforce access rules</td>
            </tr>
            <tr>
              <td><code>app.MapControllerRoute(...)</code></td>
              <td>Map MVC routes/endpoints</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="image-icons">
        <span class="image-icons-label">Images:</span>
        <button class="image-icon" onclick="toggleImage(this)" data-src="">
          ðŸ“·
        </button>
        <button class="image-icon" onclick="toggleImage(this)" data-src="">
          ðŸ“·
        </button>
      </div>
      <div class="image-preview-box"></div>
    </div>

    <!-- ===================== SECTION 12 ===================== -->
    <h2 class="section-header" onclick="toggleSection(this)">
      SECTION 12: State Management <span class="toggle-icon">â–¼</span>
    </h2>
    <div class="section-content">
      <ul>
        <li>
          <strong>Session:</strong> <code>services.AddSession()</code>,
          <code>app.UseSession()</code>,
          <code>HttpContext.Session.SetString/GetString</code>
        </li>
        <li>
          <strong>Cache:</strong> In-Memory, Response, Distributed (Redis/SQL)
          for scalability
        </li>
        <li>
          <strong>All Ways:</strong> ViewBag, ViewData, TempData, Session,
          Cache, Cookies, Hidden Fields
        </li>
      </ul>

      <table>
        <thead>
          <tr>
            <th>Type</th>
            <th>Scope</th>
            <th>Use For</th>
            <th>Syntax</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>ViewBag</strong></td>
            <td>Current request</td>
            <td>Pass small data to view (dynamic key/value)</td>
            <td><code>ViewBag.Title = "Home"</code></td>
          </tr>
          <tr>
            <td><strong>ViewData</strong></td>
            <td>Current request</td>
            <td>Pass small data to view (dictionary; casting required)</td>
            <td><code>ViewData["Title"] = "Home"</code></td>
          </tr>
          <tr>
            <td><strong>TempData</strong></td>
            <td>One redirect; <code>Peek()</code>, <code>Keep()</code></td>
            <td>Controller to controller (success/error messages)</td>
            <td><code>TempData["Msg"] = "Saved"</code></td>
          </tr>
          <tr>
            <td><strong>Session</strong></td>
            <td>User session</td>
            <td>User-specific data (cart, prefs)</td>
            <td><code>HttpContext.Session.SetString("Key","Val")</code></td>
          </tr>
        </tbody>
      </table>

      <div class="image-icons">
        <span class="image-icons-label">Images:</span>
        <button class="image-icon" onclick="toggleImage(this)" data-src="">
          ðŸ“·
        </button>
        <button class="image-icon" onclick="toggleImage(this)" data-src="">
          ðŸ“·
        </button>
      </div>
      <div class="image-preview-box"></div>
    </div>

    <!-- ===================== SECTION 13 ===================== -->
    <h2 class="section-header" onclick="toggleSection(this)">
      SECTION 13: Error Handling &amp; Logging
      <span class="toggle-icon">â–¼</span>
    </h2>
    <div class="section-content">
      <ul>
        <li>
          <strong>Development:</strong>
          <code>UseDeveloperExceptionPage()</code> â€” detailed stack traces
        </li>
        <li>
          <strong>Production:</strong>
          <code>UseExceptionHandler("/Home/Error")</code> â€” friendly error page
        </li>
        <li>
          <strong>Status Code Pages:</strong>
          <code>UseStatusCodePagesWithReExecute("/Home/Error/{0}")</code>
        </li>
        <li>
          <strong>Error View:</strong> <code>Error.cshtml</code> in Shared
          folder; displays friendly message
        </li>
        <li>
          <strong>Ways:</strong> Try-Catch, Exception Page, Custom &amp;
          Built-in Exception Filters &amp; Middlewares
        </li>
        <li>
          <strong>Logging:</strong> <code>ILogger&lt;T&gt;</code> is the main
          logging interface; log levels control severity; providers decide where
          logs go (console, file, Seq); <strong>Serilog</strong> provides
          structured logging; HTTP Logging middleware logs requests/responses
        </li>
      </ul>
      <div class="image-icons">
        <span class="image-icons-label">Images:</span>
        <button class="image-icon" onclick="toggleImage(this)" data-src="">
          ðŸ“·
        </button>
        <button class="image-icon" onclick="toggleImage(this)" data-src="">
          ðŸ“·
        </button>
      </div>
      <div class="image-preview-box"></div>
    </div>

    <!-- ===================== SECTION 14 ===================== -->
    <h2 class="section-header" onclick="toggleSection(this)">
      SECTION 14: Performance &amp; Optimization
      <span class="toggle-icon">â–¼</span>
    </h2>
    <div class="section-content">
      <ul>
        <li><strong>Optimize:</strong> SQL, C#, EF, Web API calls</li>
        <li>
          <strong>Use async/await:</strong> For DB and HTTP calls; prevents
          thread blocking
        </li>
        <li>
          <strong>Caching:</strong> Response, Output, In-Memory, Redis â€” avoid
          repeated processing
        </li>
        <li>
          <strong>Compression, Bundling &amp; Minification:</strong>
          <code>UseResponseCompression</code> (gzip/brotli) reduces response
          size; bundling reduces browser HTTP requests; minification shrinks
          assets
        </li>
        <li>
          <strong>Static Files via CDN:</strong> Serve CSS, JS, images via CDN;
          use <code>UseStaticFiles()</code> middleware early
        </li>
      </ul>
      <div class="image-icons">
        <span class="image-icons-label">Images:</span>
        <button class="image-icon" onclick="toggleImage(this)" data-src="">
          ðŸ“·
        </button>
        <button class="image-icon" onclick="toggleImage(this)" data-src="">
          ðŸ“·
        </button>
      </div>
      <div class="image-preview-box"></div>
    </div>

    <!-- ===================== SECTION 15 ===================== -->
    <h2 class="section-header" onclick="toggleSection(this)">
      SECTION 15: Security Best Practices <span class="toggle-icon">â–¼</span>
    </h2>
    <div class="section-content">
      <table>
        <thead>
          <tr>
            <th>Security Topic</th>
            <th>Who is Under Attack</th>
            <th>What the Attack Is</th>
            <th>How to Prevent</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>CSRF</strong></td>
            <td>Logged-in <strong>User</strong></td>
            <td>
              Attacker tricks browser to send authenticated requests without
              user intent
            </td>
            <td>
              Antiforgery tokens on POST/PUT/DELETE â€”
              <code>[ValidateAntiForgeryToken]</code>
            </td>
          </tr>
          <tr>
            <td><strong>XSS</strong></td>
            <td><strong>User's Browser</strong></td>
            <td>
              Malicious JavaScript injected via input and executed in browser
            </td>
            <td>
              Razor auto-encoding (<code>@</code>); avoid
              <code>@Html.Raw</code> with untrusted data
            </td>
          </tr>
          <tr>
            <td><strong>SQL Injection</strong></td>
            <td><strong>Database</strong></td>
            <td>Malicious SQL input alters or leaks DB data</td>
            <td>
              EF Core, parameterized queries, stored procedures; no SQL string
              concatenation
            </td>
          </tr>
          <tr>
            <td><strong>HTTPS</strong></td>
            <td><strong>Data in Transit</strong></td>
            <td>Attacker intercepts or modifies traffic (MITM)</td>
            <td><code>UseHttpsRedirection()</code>, HSTS in production</td>
          </tr>
          <tr>
            <td><strong>Auth Secrets</strong></td>
            <td><strong>Application / Infra</strong></td>
            <td>Leaked keys allow full system access</td>
            <td>Azure Key Vault; never commit secrets to Git</td>
          </tr>
          <tr>
            <td><strong>Input Validation</strong></td>
            <td><strong>Application Logic</strong></td>
            <td>Invalid or malicious input causes unexpected behavior</td>
            <td>
              Always validate server-side; client-side is convenience only
            </td>
          </tr>
          <tr>
            <td><strong>Secure Headers</strong></td>
            <td><strong>Browser Context</strong></td>
            <td>Clickjacking, MIME sniffing, script injection</td>
            <td>
              <code>X-Frame-Options</code>, <code>X-Content-Type-Options</code>,
              <code>Content-Security-Policy</code>
            </td>
          </tr>
        </tbody>
      </table>
      <div class="image-icons">
        <span class="image-icons-label">Images:</span>
        <button class="image-icon" onclick="toggleImage(this)" data-src="">
          ðŸ“·
        </button>
        <button class="image-icon" onclick="toggleImage(this)" data-src="">
          ðŸ“·
        </button>
      </div>
      <div class="image-preview-box"></div>
    </div>

    <!-- ===================== SECTION 16 ===================== -->
    <h2 class="section-header" onclick="toggleSection(this)">
      SECTION 16: Testing Basics <span class="toggle-icon">â–¼</span>
    </h2>
    <div class="section-content">
      <ul>
        <li>
          <strong>Unit Tests:</strong> Test a small piece of code in isolation
          (e.g. an action method) â€” xUnit / NUnit
        </li>
        <li>
          <strong>Integration Tests:</strong> Test how different parts of the
          app work together (e.g. API endpoints, DB flow)
        </li>
        <li>
          <strong>Mocking:</strong> Moq library; mock dependencies; test logic
          not infrastructure
        </li>
        <li><strong>Arrange-Act-Assert:</strong> Standard test structure</li>
      </ul>
      <div class="image-icons">
        <span class="image-icons-label">Images:</span>
        <button class="image-icon" onclick="toggleImage(this)" data-src="">
          ðŸ“·
        </button>
        <button class="image-icon" onclick="toggleImage(this)" data-src="">
          ðŸ“·
        </button>
      </div>
      <div class="image-preview-box"></div>
    </div>

    <!-- ===================== SECTION 17 ===================== -->
    <h2 class="section-header" onclick="toggleSection(this)">
      SECTION 17: Miscellaneous <span class="toggle-icon">â–¼</span>
    </h2>
    <div class="section-content">
      <ul>
        <li>
          <strong>Remote Attribute:</strong> Validates field by calling server
          method via AJAX before form submission â€”
          <code>[Remote("isEmailExists","Controller")]</code>
        </li>
        <li>
          <strong>HttpClientFactory:</strong> Manages HttpClient instances;
          avoids socket exhaustion, DNS cache issues, and improper disposal
        </li>
        <li>
          <strong>Environment-Based Config:</strong> Dev, Staging, Prod â€”
          <code>appsettings.{Environment}.json</code>; access via
          <code>IConfiguration</code> or strongly-typed
          <code>IOptions&lt;T&gt;</code>
        </li>
        <li>
          <strong>Coding Standards:</strong> <strong>Code Analysis</strong> â€”
          rule violations via Roslyn Analyzers; <strong>Code Metrics</strong> â€”
          complexity via VS Metrics; <strong>Code Coverage</strong> â€” test
          coverage via VS Test Coverage
        </li>
      </ul>
      <div class="image-icons">
        <span class="image-icons-label">Images:</span>
        <button class="image-icon" onclick="toggleImage(this)" data-src="">
          ðŸ“·
        </button>
        <button class="image-icon" onclick="toggleImage(this)" data-src="">
          ðŸ“·
        </button>
      </div>
      <div class="image-preview-box"></div>
    </div>

    <!-- ===================== SECTION 18: SCENARIOS ===================== -->
    <h2 class="section-header" onclick="toggleSection(this)">
      SECTION 18: Scenario-Based Questions <span class="toggle-icon">â–¼</span>
    </h2>
    <div class="section-content">
      <div class="scenario-item">
        <h3>1. Form Resubmission on Browser Refresh</h3>
        <p>
          After submitting an order form, users refresh the page and the order
          gets created again, resulting in duplicates. Users also sometimes
          click Submit multiple times on slow networks. How do you prevent this?
        </p>
        <div class="answer">
          <strong>Answer:</strong>
          <p>
            Use the Post-Redirect-Get (PRG) pattern â€” after saving data in the
            POST action, redirect to a GET action instead of returning a view
            directly. Refreshing the page then only repeats the GET, not the
            POST. Additionally, disable the submit button after the first click
            via JavaScript to prevent multiple submissions, and use an
            idempotency key to ignore any duplicate requests that still get
            through.
          </p>
        </div>
        <div class="image-icons">
          <span class="image-icons-label">Images:</span>
          <button class="image-icon" onclick="toggleImage(this)" data-src="">
            ðŸ“·
          </button>
          <button class="image-icon" onclick="toggleImage(this)" data-src="">
            ðŸ“·
          </button>
        </div>
        <div class="image-preview-box"></div>
      </div>

      <div class="scenario-item">
        <h3>2. Session Data Lost in Load-Balanced Environment</h3>
        <p>
          Shopping cart data is stored in Session. After deploying to multiple
          servers behind a load balancer, users randomly lose cart items because
          requests go to different servers. How do you fix this?
        </p>
        <div class="answer">
          <strong>Answer:</strong>
          <p>
            In-memory session is stored per server and not shared. When a
            request hits a different server, the session data isn't there. Fix:
            use distributed session storage â€” Redis or SQL Server â€” so all
            servers share the same session. For critical data like carts, prefer
            storing it in the database. Never use in-memory session in a
            load-balanced environment.
          </p>
        </div>
        <div class="image-icons">
          <span class="image-icons-label">Images:</span>
          <button class="image-icon" onclick="toggleImage(this)" data-src="">
            ðŸ“·
          </button>
          <button class="image-icon" onclick="toggleImage(this)" data-src="">
            ðŸ“·
          </button>
        </div>
        <div class="image-preview-box"></div>
      </div>

      <div class="scenario-item">
        <h3>3. CSRF Attack on Money Transfer Form</h3>
        <p>
          An attacker creates a malicious site with a hidden form that submits
          to your app, causing unauthorized transfers when logged-in users visit
          that site. How do you prevent CSRF?
        </p>
        <div class="answer">
          <strong>Answer:</strong>
          <p>
            CSRF tricks a logged-in user's browser into sending a request to
            your app from a malicious site. Prevent it by using anti-forgery
            tokens â€” add <code>@Html.AntiForgeryToken()</code> in forms and
            validate with <code>[ValidateAntiForgeryToken]</code> on POST
            actions. The token is unique per session, so requests from external
            sites won't have it and will be rejected.
          </p>
        </div>
        <div class="image-icons">
          <span class="image-icons-label">Images:</span>
          <button class="image-icon" onclick="toggleImage(this)" data-src="">
            ðŸ“·
          </button>
          <button class="image-icon" onclick="toggleImage(this)" data-src="">
            ðŸ“·
          </button>
        </div>
        <div class="image-preview-box"></div>
      </div>

      <div class="scenario-item">
        <h3>4. Over-Posting / User Grants Themselves Admin</h3>
        <p>
          Your edit form only shows Name and Email. A malicious user adds
          <code>IsAdmin=true</code> to the POST data using dev tools and grants
          themselves admin privileges. How do you prevent this?
        </p>
        <div class="answer">
          <strong>Answer:</strong>
          <p>
            Use dedicated ViewModels that only expose the fields intended for
            editing. Never bind domain entities directly in POST actions. Since
            <code>IsAdmin</code> is not a property on the ViewModel, MVC won't
            bind it even if the client sends it. Alternatively use
            <code>[Bind("Name,Email")]</code> to explicitly whitelist allowed
            fields.
          </p>
        </div>
        <div class="image-icons">
          <span class="image-icons-label">Images:</span>
          <button class="image-icon" onclick="toggleImage(this)" data-src="">
            ðŸ“·
          </button>
          <button class="image-icon" onclick="toggleImage(this)" data-src="">
            ðŸ“·
          </button>
        </div>
        <div class="image-preview-box"></div>
      </div>

      <div class="scenario-item">
        <h3>5. XSS â€” Script Injected via User Comment</h3>
        <p>
          Users post comments with
          <code>&lt;script&gt;alert('Hacked')&lt;/script&gt;</code> and the
          script executes for everyone viewing the page. How do you prevent XSS?
        </p>
        <div class="answer">
          <strong>Answer:</strong>
          <p>
            Razor automatically HTML-encodes output when you use
            <code>@variable</code> â€” the script tags become plain text, not
            executable. Never use <code>@Html.Raw()</code> with untrusted user
            input. Always validate input server-side too. Razor's auto-encoding
            covers the vast majority of XSS attack vectors.
          </p>
        </div>
        <div class="image-icons">
          <span class="image-icons-label">Images:</span>
          <button class="image-icon" onclick="toggleImage(this)" data-src="">
            ðŸ“·
          </button>
          <button class="image-icon" onclick="toggleImage(this)" data-src="">
            ðŸ“·
          </button>
        </div>
        <div class="image-preview-box"></div>
      </div>

      <div class="scenario-item">
        <h3>6. User Accesses Admin Pages by Typing the URL</h3>
        <p>
          Admin links are hidden in the nav menu for non-admins, but users can
          still access <code>/Admin/DeleteUser</code> by typing it directly. How
          do you implement proper authorization?
        </p>
        <div class="answer">
          <strong>Answer:</strong>
          <p>
            Hiding links in the UI is not security â€” anyone can type a URL.
            Secure the action with <code>[Authorize(Roles = "Admin")]</code>.
            This enforces authorization at the server level regardless of how
            the user reached the URL. Never rely on UI visibility for access
            control.
          </p>
        </div>
        <div class="image-icons">
          <span class="image-icons-label">Images:</span>
          <button class="image-icon" onclick="toggleImage(this)" data-src="">
            ðŸ“·
          </button>
          <button class="image-icon" onclick="toggleImage(this)" data-src="">
            ðŸ“·
          </button>
        </div>
        <div class="image-preview-box"></div>
      </div>

      <div class="scenario-item">
        <h3>7. DbContext Disposed Error When View Renders</h3>
        <p>
          The view tries to access lazy-loaded navigation properties but throws
          "Cannot access a disposed object." The DbContext was disposed before
          the view rendered. How do you fix it?
        </p>
        <div class="answer">
          <strong>Answer:</strong>
          <p>
            Lazy loading fires a DB query when a navigation property is accessed
            â€” but by the time the view renders, the DbContext is already
            disposed. Fix: eagerly load all required data in the controller
            using <code>Include()</code>, or use a ViewModel so the view never
            touches navigation properties directly. Views should render data,
            never fetch it.
          </p>
        </div>
        <div class="image-icons">
          <span class="image-icons-label">Images:</span>
          <button class="image-icon" onclick="toggleImage(this)" data-src="">
            ðŸ“·
          </button>
          <button class="image-icon" onclick="toggleImage(this)" data-src="">
            ðŸ“·
          </button>
        </div>
        <div class="image-preview-box"></div>
      </div>

      <div class="scenario-item">
        <h3>8. Dashboard Page Takes 15 Seconds to Load</h3>
        <p>
          Your dashboard has 20 partial views and each makes its own separate
          database call. The whole page takes 15 seconds. How do you fix it?
        </p>
        <div class="answer">
          <strong>Answer:</strong>
          <p>
            Each partial view fetching its own data causes 20+ DB round trips.
            Fix: load all required data in the controller in a single
            comprehensive query and pass it via a ViewModel. Partial views
            should receive data from the ViewModel, not fetch it themselves.
            This reduces 20 queries to 1 or 2 and renders dramatically faster.
          </p>
        </div>
        <div class="image-icons">
          <span class="image-icons-label">Images:</span>
          <button class="image-icon" onclick="toggleImage(this)" data-src="">
            ðŸ“·
          </button>
          <button class="image-icon" onclick="toggleImage(this)" data-src="">
            ðŸ“·
          </button>
        </div>
        <div class="image-preview-box"></div>
      </div>

      <div class="scenario-item">
        <h3>9. Anti-Forgery Token Error in AJAX Requests</h3>
        <p>
          AJAX POST requests fail with "The anti-forgery token could not be
          decrypted," especially when users have multiple tabs open or the page
          has been idle. How do you fix it?
        </p>
        <div class="answer">
          <strong>Answer:</strong>
          <p>
            AJAX requests don't automatically include anti-forgery tokens like
            normal form posts. Fix: generate the token with
            <code>@Html.AntiForgeryToken()</code>, read it from the hidden field
            in JavaScript, and send it as a request header
            (<code>RequestVerificationToken</code>) in every AJAX POST call. The
            server then validates it normally.
          </p>
        </div>
        <div class="image-icons">
          <span class="image-icons-label">Images:</span>
          <button class="image-icon" onclick="toggleImage(this)" data-src="">
            ðŸ“·
          </button>
          <button class="image-icon" onclick="toggleImage(this)" data-src="">
            ðŸ“·
          </button>
        </div>
        <div class="image-preview-box"></div>
      </div>

      <div class="scenario-item">
        <h3>10. ViewBag Dropdown Data Lost After Validation Failure</h3>
        <p>
          You populate dropdown data in ViewBag, validate the form, and return
          the view on errors. The dropdowns are now empty. How do you preserve
          dropdown data on validation failure?
        </p>
        <div class="answer">
          <strong>Answer:</strong>
          <p>
            ViewBag only lives for one request â€” when you return the view after
            validation failure, it's gone. Best fix: include dropdown data
            inside the ViewModel itself (e.g. a
            <code>List&lt;SelectListItem&gt; Categories</code> property). When
            returning the view on validation failure, repopulate the ViewModel
            including that list. Avoid using ViewBag for data that must survive
            validation failures.
          </p>
        </div>
        <div class="image-icons">
          <span class="image-icons-label">Images:</span>
          <button class="image-icon" onclick="toggleImage(this)" data-src="">
            ðŸ“·
          </button>
          <button class="image-icon" onclick="toggleImage(this)" data-src="">
            ðŸ“·
          </button>
        </div>
        <div class="image-preview-box"></div>
      </div>

      <div class="scenario-item">
        <h3>11. Files in wwwroot Accessible Without Auth</h3>
        <p>
          Files in <code>wwwroot/uploads</code> are directly accessible by
          anyone who knows the URL, bypassing your authorization logic. How do
          you secure file downloads?
        </p>
        <div class="answer">
          <strong>Answer:</strong>
          <p>
            Files inside <code>wwwroot</code> are served directly by the web
            server, bypassing MVC and authorization entirely. Fix: store
            sensitive files outside <code>wwwroot</code> and serve them through
            a controller action protected with <code>[Authorize]</code>. The
            action reads the file from the secure location and returns it using
            <code>File()</code>. Only authorized users can reach the action and
            get the file.
          </p>
        </div>
        <div class="image-icons">
          <span class="image-icons-label">Images:</span>
          <button class="image-icon" onclick="toggleImage(this)" data-src="">
            ðŸ“·
          </button>
          <button class="image-icon" onclick="toggleImage(this)" data-src="">
            ðŸ“·
          </button>
        </div>
        <div class="image-preview-box"></div>
      </div>

      <div class="scenario-item">
        <h3>12. Stale Cache Data After Database Update</h3>
        <p>
          You update a product price in the database but users still see the old
          price even after refreshing. The cache is serving stale data. How do
          you handle cache invalidation?
        </p>
        <div class="answer">
          <strong>Answer:</strong>
          <p>
            Cached data doesn't update automatically when the database changes.
            Fix: invalidate (remove or update) the relevant cache key
            immediately after any write operation. In ASP.NET Core, call
            <code>_cache.Remove("productList")</code> after updating. Set an
            expiration time as a safety net, but don't rely on it alone â€” always
            invalidate on write.
          </p>
        </div>
        <div class="image-icons">
          <span class="image-icons-label">Images:</span>
          <button class="image-icon" onclick="toggleImage(this)" data-src="">
            ðŸ“·
          </button>
          <button class="image-icon" onclick="toggleImage(this)" data-src="">
            ðŸ“·
          </button>
        </div>
        <div class="image-preview-box"></div>
      </div>

      <!-- ===== QUESTIONS 21-26: KEPT EXACTLY AS ORIGINAL ===== -->

      <div class="scenario-item">
        <h3>13. Memory Leaks from Event Handlers</h3>
        <p>
          Your application's memory usage keeps growing over time. After several
          hours of use, the server runs out of memory and needs to be restarted.
          Investigation shows event handlers and static references are not being
          cleaned up. How do you identify and fix memory leaks in MVC?
        </p>
        <div class="answer">
          <strong>Answer:</strong>
          <p>
            Memory leaks in MVC often come from event handlers not being
            unsubscribed, static collections holding references, or DbContext
            instances not being disposed. I identify memory leaks using memory
            profilers like dotMemory or Visual Studio Diagnostic Tools. To fix
            them, I ensure all IDisposable objects (like DbContext) are properly
            disposed using <code>using</code> statements, unsubscribe from
            events when they're no longer needed, and avoid storing large
            objects in static fields or Application state. In ASP.NET Core, I
            use dependency injection with proper lifetimes (Scoped for
            DbContext) to ensure objects are disposed correctly.
          </p>
        </div>
        <div class="image-icons">
          <span class="image-icons-label">Images:</span>
          <button class="image-icon" onclick="toggleImage(this)" data-src="">
            ðŸ“·
          </button>
          <button class="image-icon" onclick="toggleImage(this)" data-src="">
            ðŸ“·
          </button>
        </div>
        <div class="image-preview-box"></div>
      </div>

      <div class="scenario-item">
        <h3>14. Authentication Flow in ASP.NET MVC &amp; Angular</h3>
        <p>
          A user logs in to an ASP.NET MVC application that consumes a Web API.
          The browser does not call the API directly. How does authentication
          work?
        </p>
        <div class="answer">
          <strong>Answer:</strong>

          <p>
            <strong>How JWT Token is Created:</strong>
            When a user logs in, MVC or Angular calls the Login API. The API
            validates the username and password from the database and then
            creates a JWT token. The JWT contains three parts: header, payload,
            and signature. The payload includes user information such as user
            id, claims, and role, along with expiry time. The token is signed
            using a secret key to ensure it is not modified. After creation, the
            API stores the JWT inside an HttpOnly secure cookie. The browser
            saves this cookie and automatically sends it with every request.
          </p>

          <hr />

          <p>
            <strong>How MVC Handles the JWT Cookie:</strong>
            When a user accesses any page, the browser sends the cookie to MVC
            automatically. When MVC receives a request with the cookie, the
            authentication middleware extracts the JWT from the cookie and
            validates its signature and expiry. If the token is valid, it
            creates a ClaimsPrincipal and sets HttpContext.User, which contains
            all user information. Then the authorization middleware checks roles
            if required. After that, the controller runs and can access user
            information using User.Identity and User.Claims.
          </p>

          <hr />

          <p>
            <strong>How Angular Works with JWT Cookie:</strong>
            In Angular, the browser also sends the HttpOnly cookie automatically
            with each outgoing API request. Angular cannot read the HttpOnly
            cookie directly, so to display user details it calls the /UserInfo
            API. That API reads the cookie, validates the JWT from the cookie,
            and returns user information like name and role. For protected APIs,
            we use [Authorize(Roles="Admin")], and if the role does not match,
            the API returns 403 Forbidden.
          </p>

          <hr />

          <p>
            <strong>Cache vs Session:</strong>
            Cache is used to store frequently used or expensive data to improve
            performance, and it is usually shared across all users. Session is
            used to store user-specific temporary data like cart or multi-step
            form state. Cache improves system speed, while session maintains
            user state. Both cache and session can be implemented in in-memory
            or distributed types.
          </p>

          <hr />

          <p>
            <strong>Backend Caching in MVC:</strong>
            On the MVC/backend side, to cache expensive API responses, we use
            IMemoryCache for single-server applications or IDistributedCache
            with Redis for multi-server environments. We store the response
            using a key and set a TTL (expiration time). On the next request, we
            return the cached data instead of hitting the database.
          </p>

          <hr />

          <p>
            <strong>Frontend Caching in Angular:</strong>
            On the Angular side, we cache responses mainly for UI performance
            using an in-memory service, RxJS shareReplay, sessionStorage,
            localStorage, or NgRx store. Backend caching improves overall system
            performance, while frontend caching mainly improves user experience.
          </p>

          <hr />

          <p>
            <strong>MVC â†’ Web API (App to App authentication):</strong>
            App-to-app authentication ensures that only trusted applications can
            call backend APIs. User authentication proves who the user is, while
            application authentication proves which application is making the
            request. This is not for end users; it is for the MVC application
            when calling backend Web APIs. Basic Auth sends username and
            password on every request, which is insecure. With OAuth (client
            credentials flow), MVC authenticates once with an OAuth server and
            receives a JWT access token and refresh token. MVC uses the access
            token to call APIs, and when it expires, the refresh token is used
            to obtain a new one. The JWT may contain scopes for authorization,
            and OAuth acts as the token issuer.
          </p>

          <hr />

          <p>
            <strong>Refresh Token (MVC and Angular):</strong>
            Refresh tokens are used to obtain a new access token when the
            current JWT access token expires, without forcing the user or
            application to log in again. In Angular (user authentication), after
            login the API issues a short-lived access token (stored in an
            HttpOnly cookie) and a longer-lived refresh token. When the access
            token expires, Angular calls a refresh endpoint, and the backend
            validates the refresh token and issues a new JWT. In MVC app-to-app
            authentication, OAuth also provides an access token and refresh
            token. MVC uses the access token to call Web APIs, and when it
            expires, the refresh token is used to request a new access token
            from the OAuth server. This improves security by keeping access
            tokens short-lived while maintaining seamless authentication.
          </p>
        </div>
        <div class="image-icons">
          <span class="image-icons-label">Images:</span>
          <button class="image-icon" onclick="toggleImage(this)" data-src="">
            ðŸ“·
          </button>
          <button class="image-icon" onclick="toggleImage(this)" data-src="">
            ðŸ“·
          </button>
        </div>
        <div class="image-preview-box"></div>
      </div>

      <div class="scenario-item">
        <h3>15. Migrating from .NET Framework MVC to .NET Core</h3>
        <p>
          You are asked to migrate an existing .NET Framework MVC application to
          ASP.NET Core. The application uses Web.config, System.Web, and older
          authentication mechanisms. How do you approach this migration?
        </p>
        <div class="answer">
          <strong>Answer:</strong>
          <p>
            I start by creating a new ASP.NET Core project with an SDK-style
            <code>.csproj</code> file and update NuGet packages to
            Core-compatible versions. I move Controllers, Models, and Views to
            the new structure and place static files in the
            <code>wwwroot</code> folder. Since <code>System.Web</code> is not
            available, I replace <code>HttpContext.Current</code> with
            <code>IHttpContextAccessor</code> and
            <code>Server.MapPath</code> with <code>IWebHostEnvironment</code>.
            Session handling is updated using distributed cache. I replace Forms
            Authentication or OWIN with ASP.NET Core Identity and cookie
            authentication. Configuration moves from <code>Web.config</code> to
            <code>appsettings.json</code>, middleware and DI are configured in
            <code>Program.cs</code>, and test projects are updated to
            Core-compatible frameworks. For large apps, I prefer incremental
            migration and use the .NET Upgrade Assistant to identify issues.
          </p>
        </div>
        <div class="image-icons">
          <span class="image-icons-label">Images:</span>
          <button class="image-icon" onclick="toggleImage(this)" data-src="">
            ðŸ“·
          </button>
          <button class="image-icon" onclick="toggleImage(this)" data-src="">
            ðŸ“·
          </button>
        </div>
        <div class="image-preview-box"></div>
      </div>

      <div class="scenario-item">
        <h3>16. How do you deploy an application using IIS?</h3>
        <p>
          You have an ASP.NET / ASP.NET Core application on your local machine
          and need to make it available publicly using IIS. What are the steps?
        </p>
        <div class="answer">
          <strong>Answer:</strong>
          <p>
            I right-click the project in Visual Studio and publish it to a
            folder. I copy the published files to the server and open IIS
            Manager. I create an application pool with the correct runtime, then
            create a website in IIS by selecting the published folder, assigning
            the application pool, setting the website name, and configuring the
            port. I set folder permissions for
            <code>IIS_IUSRS</code>, start the site, and open ports
            <code>80</code> and <code>443</code> to make the application
            accessible.
          </p>
        </div>
        <div class="image-icons">
          <span class="image-icons-label">Images:</span>
          <button class="image-icon" onclick="toggleImage(this)" data-src="">
            ðŸ“·
          </button>
          <button class="image-icon" onclick="toggleImage(this)" data-src="">
            ðŸ“·
          </button>
        </div>
        <div class="image-preview-box"></div>
      </div>

      <div class="scenario-item">
        <h3>17. How do you deploy an application to Azure App Service?</h3>
        <p>
          You want to deploy a .NET application to Azure so it is publicly
          accessible without managing servers manually. How do you do it?
        </p>
        <div class="answer">
          <strong>Answer:</strong>
          <p>
            I create an Azure account and then create an App Service from the
            Azure Portal by configuring the service name, plan, region, runtime,
            and OS. From Visual Studio, I publish the application by selecting
            Azure, choosing Azure App Service, signing in, and selecting the
            created service. After deployment, I configure application settings
            in Azure and access the application using the public Azure App
            Service URL.
          </p>
        </div>
        <div class="image-icons">
          <span class="image-icons-label">Images:</span>
          <button class="image-icon" onclick="toggleImage(this)" data-src="">
            ðŸ“·
          </button>
          <button class="image-icon" onclick="toggleImage(this)" data-src="">
            ðŸ“·
          </button>
        </div>
        <div class="image-preview-box"></div>
      </div>

      <div class="scenario-item">
        <h3>18. Reverse Proxy and Load Balancer Flow</h3>
        <p>
          In a normal production ASP.NET MVC, Angular, or Microservices
          application, how are the Client, Reverse Proxy, Load Balancer, and
          Application Servers connected?
        </p>
        <div class="answer">
          <strong>Answer:</strong>

          <p><strong>1. Monolithic (ASP.NET MVC)</strong></p>
          <p>
            Client â†’ Load Balancer (Reverse Proxy) â†’ Application Servers â†’
            Database / Redis
          </p>

          <p><strong>2. Angular + ASP.NET Core API</strong></p>
          <p>
            Browser â†’ Load Balancer (Reverse Proxy) â†’ API Servers â†’ Database /
            Redis
          </p>
          <p>
            Angular runs in the browser and communicates with backend APIs using
            HTTP requests.
          </p>

          <p><strong>3. Microservices Architecture</strong></p>
          <p>
            Client â†’ API Gateway (Reverse Proxy) â†’ Load Balancer â†’ Microservices
            â†’ Database
          </p>
          <p>
            In microservices, the API Gateway acts as a Reverse Proxy and routes
            requests to the appropriate service.
          </p>
        </div>
        <div class="image-icons">
          <span class="image-icons-label">Images:</span>
          <button class="image-icon" onclick="toggleImage(this)" data-src="">
            ðŸ“·
          </button>
          <button class="image-icon" onclick="toggleImage(this)" data-src="">
            ðŸ“·
          </button>
        </div>
        <div class="image-preview-box"></div>
      </div>
    </div>
    <!-- end section-content scenarios -->

    <script src="../change.js"></script>
  </body>
</html>
